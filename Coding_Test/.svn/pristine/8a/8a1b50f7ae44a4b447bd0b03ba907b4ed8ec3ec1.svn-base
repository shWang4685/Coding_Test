package com.itest.testcases.teacher;

import java.util.List;
import org.apache.bcel.ExceptionConstants;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.NoSuchElementException;
import org.openqa.selenium.StaleElementReferenceException;
import org.openqa.selenium.TimeoutException;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.ui.ExpectedConditions;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.Assert;
import org.testng.ITestContext;
import org.testng.annotations.BeforeClass;
import org.testng.annotations.Test;
import com.itest.testcases.bean.LoginBean;
import com.itest.utils.GetBorwser;
import com.itest.utils.LogConfiguration;
import com.itest.utils.SeleniumUtil;
import jxl.common.Logger;

public class TeacherHome_002_LeftHelp_Test {

  static Logger logger=Logger.getLogger(TeacherHome_002_LeftHelp_Test.class);
  WebDriver driver=null;
  ITestContext itestContext=null;
  
  @BeforeClass
  public void  TeacherHome_002_LeftHelp_Test(ITestContext itestContext){
    this.itestContext=itestContext;
    this.driver=new GetBorwser().getWebDriver();
    itestContext.setAttribute("SELENIUM_DRIVER", driver);
    LogConfiguration.initLog(this.getClass().getSimpleName());
        
  }
  @Test
  public void LeftHelp(){
    WebDriverWait wait =null;
    SeleniumUtil seleniumUtil=new SeleniumUtil(driver);
    //登录页面
    LoginBean login=new LoginBean();
    //教师登录
    login.teacherLogin(driver);
    //点击课程中心标签    
    driver.findElement(By.xpath("//*[@id=\"app\"]/div/div/div[1]/div[2]/div/div/ul/li[1]/span/a")).click();
    
    try{
      wait= new WebDriverWait(driver, 3);
      wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("//*[@id=\"app\"]/div/div/div[2]/div[1]/div/div/ul/li[2]/ul/li")));        
    }catch(TimeoutException no){
      System.out.println("进来了");
      
    }
    
    List<WebElement> webElements=driver.findElements(By.xpath("//*[@id=\"app\"]/div/div/div[2]/div[1]/div/div/ul/li[2]/ul/li"));   
    System.out.println(webElements.size());
    for(WebElement e:webElements){
      String className=e.getText();
      System.out.println(className);
      e.click();
      //显示等待     
      String centerClassName=driver.findElement(By.xpath("//*[@id=\"app\"]/div/div/div[2]/div[2]/div/div/div[1]/h3/span")).getText();
      System.out.println(centerClassName);
      if(!className.equals(centerClassName)){
        logger.error("[点击班级：]"+className+"出现错误，名字核对错误");
        Assert.fail("[点击班级：]"+className+"出现错误，名字核对错误");        
      }
      seleniumUtil.pause(500);
    }
    
    //创建班级
    driver.findElement(By.xpath("//*[@id=\"app\"]/div/div/div[1]/div[2]/div/div/ul/li[2]/span/span/span/i")).click();
    try {
     Thread.sleep(5000);      
     WebElement web= driver.findElement(By.xpath("/html/body/div[10]/div/div[2]/div/div/div[2]/div/div[1]/div/div/input"));
    } catch (InterruptedException e1) {
      // TODO Auto-generated catch block
      e1.printStackTrace();
    } catch(NoSuchElementException nee){
      logger.info("没有拿到元素");
    }
    driver.findElement(By.xpath("/html/body/div[10]/div/div[2]/div/div/div[2]/div/div[1]/div/div/input")).sendKeys("测试创建班级");
    driver.findElement(By.xpath("/html/body/div[10]/div/div[2]/div/div/div[2]/div/div[2]/div/div/div/div")).click();
    
    try{      
      wait= new WebDriverWait(driver, 5);
      wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("/html/body/div[10]/div/div[2]/div/div/div[2]/div/div[2]/div/div/div[1]")));
      System.out.println("内容个数："+driver.findElements(By.xpath("/html/body/div[10]/div/div[2]/div/div/div[2]/div/div[2]/div/div/div[2]/div/ul/li")).size());

    }catch (TimeoutException no){
      logger.error("班级输入框没有加载出来元素1");
      Assert.fail("班级输入框没有加载出来元素1");
    }  
    

//    //鼠标点击选中
//    try{
//      wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("/html/body/div[6]/div/div[2]/div/div/div[2]/div/div[2]/div/div/div[2]/div/ul/li[2]/div")));
//    }catch (TimeoutException no){
//      logger.error("课程名称下拉框中元素没有加载出来");
//      Assert.fail("课程名称下拉框中元素没有加载出来");
//    }  
//    
//    driver.findElement(By.xpath("/html/body/div[6]/div/div[2]/div/div/div[2]/div/div[2]/div/div/div[2]/div/ul/li[2]/div")).click();
//    seleniumUtil.pause(1000);
//    driver.findElement(By.xpath("/html/body/div[6]/div/div[2]/div/div/div[3]/div/a")).click();

    


    
    
  }
  
}
